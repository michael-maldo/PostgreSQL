"use strict";(globalThis.webpackChunkpostgresql=globalThis.webpackChunkpostgresql||[]).push([[9801],{3180:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"Docker/Intro","title":"Intro","description":"Introduction to Docker","source":"@site/docs/Docker/Intro.mdx","sourceDirName":"Docker","slug":"/Docker/Intro","permalink":"/docs/Docker/Intro","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"docker","permalink":"/docs/tags/docker"},{"inline":true,"label":"stop / start","permalink":"/docs/tags/stop-start"}],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Intro","description":"Introduction to Docker","tags":["docker","stop / start"]},"sidebar":"tutorialSidebar","previous":{"title":"Docker","permalink":"/docs/category/docker"},"next":{"title":"Docker Engine","permalink":"/docs/Docker/Docker Engine"}}');var o=t(4848),a=t(8453);const r={sidebar_position:1,title:"Intro",description:"Introduction to Docker",tags:["docker","stop / start"]},s="Intro",c={},l=[{value:"Ops",id:"ops",level:2},{value:"docker version",id:"docker-version",level:3},{value:"docker images",id:"docker-images",level:3},{value:"docker containers",id:"docker-containers",level:3},{value:"Exit container without terminating",id:"exit-container-without-terminating",level:3},{value:"Connecting to running containers",id:"connecting-to-running-containers",level:3},{value:"Stopping / Killing running containers",id:"stopping--killing-running-containers",level:3},{value:"Dev",id:"dev",level:2},{value:"clone an app from a Git repo",id:"clone-an-app-from-a-git-repo",level:3},{value:"inspect its Dockerfile",id:"inspect-its-dockerfile",level:3},{value:"containerize and run as a container.",id:"containerize-and-run-as-a-container",level:3},{value:"new commands",id:"new-commands",level:3},{value:"retagging images",id:"retagging-images",level:3}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"intro",children:"Intro"})}),"\n",(0,o.jsx)(e.h2,{id:"ops",children:"Ops"}),"\n",(0,o.jsx)(e.h3,{id:"docker-version",children:"docker version"}),"\n",(0,o.jsx)(e.p,{children:"command to test that the client and daemon (server) are running and talking to each other"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",metastring:'title="bash"',children:"\n// this shows client is talking to the server\n# highlight-next-line\n$ docker version\n\n# highlight-next-line\nClient:\n Version:           24.0.5\n API version:       1.43\n Go version:        go1.22.0\n Git commit:        %{shortcommit_cli}\n Built:             Sun Feb 11 23:35:47 2024\n OS/Arch:           linux/amd64\n Context:           default\n\n# highlight-next-line\nServer:\n Engine:\n  Version:          24.0.5\n  API version:      1.43 (minimum version 1.12)\n  Go version:       go1.22.0\n  Git commit:       %{shortcommit_moby}\n  Built:            Sun Feb 11 23:35:47 2024\n  OS/Arch:          linux/amd64\n  Experimental:     false\n containerd:\n  Version:          1.6.23\n  GitCommit:\n runc:\n  Version:          1.3.0\n  GitCommit:\n docker-init:\n  Version:          0.19.0\n  GitCommit:\n\n// stopping docker - shows server not running\n# highlight-next-line\n$ sudo systemctl stop docker.service docker.socket containerd\n\n# highlight-next-line\n@:~$ docker version\n\n# highlight-next-line\nClient:\n Version:           24.0.5\n API version:       1.43\n Go version:        go1.22.0\n Git commit:        %{shortcommit_cli}\n Built:             Sun Feb 11 23:35:47 2024\n OS/Arch:           linux/amd64\n Context:           default\n# highlight-next-line\nCannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?\n\n"})}),"\n",(0,o.jsx)(e.h3,{id:"docker-images",children:"docker images"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)("b",{children:"Docker image"})," is like an object that contains an OS filesystem, an application, and all application dependencies.",(0,o.jsx)("br",{}),"\nAn image gets its own ",(0,o.jsx)("b",{children:"unique ID"}),".",(0,o.jsx)("br",{}),"\nWhen referencing images, you can refer to them using either IDs or names."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",metastring:'title="bash"',children:"// currently no images\n# highlight-next-line\n$ docker images\nREPOSITORY   TAG       IMAGE ID   CREATED   SIZE\n\n// Getting images onto your Docker host is called pulling\n// sample pull of ubuntu image\n# highlight-next-line\n$ docker pull ubuntu:latest\nlatest: Pulling from library/ubuntu\n20043066d3d5: Pull complete\nDigest: sha256:c35e29c9450151419d9448b0fd75374fec4fff364a27f176fb458d472dfc9e54\nStatus: Downloaded newer image for ubuntu:latest\ndocker.io/library/ubuntu:latest\n\n// docker after pull - showing ubuntu image\n# highlight-next-line\n$ docker images\nREPOSITORY   TAG       IMAGE ID       CREATED        SIZE\nubuntu       latest    c3a134f2ace4   2 months ago   78.1MB\n\n"})}),"\n",(0,o.jsx)(e.h3,{id:"docker-containers",children:"docker containers"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)("b",{children:"docker run"})," command to launch a container from the ",(0,o.jsx)("b",{children:"ubuntu"})," image",(0,o.jsx)("br",{}),"\nThe ",(0,o.jsx)("b",{children:"-it"})," flags tell Docker",(0,o.jsx)("br",{}),"\nto make the container interactive",(0,o.jsx)("br",{}),"\nand to attach the current shell to the container\u2019s terminal",(0,o.jsx)("br",{})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",metastring:'title="bash"',children:"// issuing some commands inside the running ubuntu image container\n# highlight-next-line\n$ docker run -it ubuntu:latest /bin/bash\nroot@a1bb606e08be:/#\nroot@a1bb606e08be:/#\nroot@a1bb606e08be:/# hostname\na1bb606e08be\nroot@a1bb606e08be:/# uname -a\nLinux a1bb606e08be 6.14.5-100.fc40.x86_64 #1 SMP PREEMPT_DYNAMIC Fri May  2 14:22:13 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux\nroot@a1bb606e08be:/# date\nWed Dec 31 13:57:37 UTC 2025\nroot@a1bb606e08be:/# whoami\nroot\nroot@a1bb606e08be:/# ps\n    PID TTY          TIME CMD\n      1 pts/0    00:00:00 bash\n     13 pts/0    00:00:00 ps\nroot@a1bb606e08be:/#\n\n"})}),"\n",(0,o.jsx)(e.h3,{id:"exit-container-without-terminating",children:"Exit container without terminating"}),"\n",(0,o.jsxs)(e.p,{children:["Press ",(0,o.jsx)("b",{children:"Ctrl-PQ"})," to exit the container without terminating it. ",(0,o.jsx)("br",{}),"\nExit from the container without killing it. ",(0,o.jsx)("br",{}),"\n",(0,o.jsx)("b",{children:"docker ps"})," command - to see all running containers ",(0,o.jsx)("br",{})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",metastring:'title="bash"',children:'\n// docker ps showing active running containers\n// below showing the ubuntu image container running - 26 minutes\n$ docker ps\nCONTAINER ID   IMAGE           COMMAND       CREATED          STATUS          PORTS     NAMES\n# highlight-next-line\na1bb606e08be   ubuntu:latest   "/bin/bash"   26 minutes ago   Up 26 minutes             youthful_vaughan\n\n'})}),"\n",(0,o.jsx)(e.h3,{id:"connecting-to-running-containers",children:"Connecting to running containers"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",metastring:'title="bash"',children:"// using CONTAINER NAME\n$ docker exec -it youthful_vaughan bash\nroot@a1bb606e08be:/#\nroot@a1bb606e08be:/# read escape sequence\n$\n\n// using CONTAINER ID\n$ docker exec -it a1bb606e08be bash\nroot@a1bb606e08be:/#\nroot@a1bb606e08be:/#\nroot@a1bb606e08be:/# read escape sequence\n$\n$\n\n// using shortcut - first few characters unique part of the CONTAINER ID\n// as long as it is unique\n$ docker exec -it a1 bash\nroot@a1bb606e08be:/#\nroot@a1bb606e08be:/# read escape sequence\n$\n$\n\n"})}),"\n",(0,o.jsx)(e.h3,{id:"stopping--killing-running-containers",children:"Stopping / Killing running containers"}),"\n",(0,o.jsxs)(e.p,{children:["Stop the container and kill it ",(0,o.jsx)("br",{}),"\nusing the ",(0,o.jsx)("b",{children:"docker stop CONTAINER_ID | NAME"})," -- to stop a running container",(0,o.jsx)("br",{}),"\nand ",(0,o.jsx)("b",{children:"docker rm CONTAINER_ID | NAME"})," command to remove a container -- only after it has stopped",(0,o.jsx)("br",{}),"\nsubstitute the names/IDs of the containers.",(0,o.jsx)("br",{})]}),"\n",(0,o.jsxs)(e.p,{children:["After container is stopped",(0,o.jsx)("br",{}),"\nRemove Images you want deleted",(0,o.jsx)("br",{}),"\nUse ",(0,o.jsxs)("b",{children:["docker rmi REPOSITORY[",":TAG","] | IMAGE_ID"]}),(0,o.jsx)("br",{})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",metastring:'title="bash"',children:'// check running containers\n$ docker ps\nCONTAINER ID   IMAGE           COMMAND       CREATED             STATUS             PORTS     NAMES\na1bb606e08be   ubuntu:latest   "/bin/bash"   About an hour ago   Up About an hour             youthful_vaughan\n$\n\n// unsuccessful removal of still running container\n$ docker rm a1bb606e08be\nError response from daemon: You cannot remove a running container a1bb606e08bedc6a05b8696f08d7790763baa60426d7220359d5115bb860af45. Stop the container before attempting removal or force remove\n$\n$\n\n// stoping a running container\n$ docker stop a1bb606e08be\na1bb606e08be\n$\n\n// docker ps  -- show container removed from the list\n$ docker ps\nCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES\n\n// docker ps -a -- still showing container\n$ docker ps -a\nCONTAINER ID   IMAGE           COMMAND       CREATED             STATUS                        PORTS     NAMES\na1bb606e08be   ubuntu:latest   "/bin/bash"   About an hour ago   Exited (137) 22 seconds ago             youthful_vaughan\n$\n\n// safe - successful removal of a stopped container\n$ docker rm a1bb606e08be\na1bb606e08be\n$\n$ docker ps -a\nCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES\n$ docker ps\nCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES\n$\n$ docker images\nREPOSITORY   TAG       IMAGE ID       CREATED        SIZE\nubuntu       latest    c3a134f2ace4   2 months ago   78.1MB\n$\n$\n\n// image can be removed only after the container is stopped / removed\n$ docker rmi ubuntu\nUntagged: ubuntu:latest\nUntagged: ubuntu@sha256:c35e29c9450151419d9448b0fd75374fec4fff364a27f176fb458d472dfc9e54\nDeleted: sha256:c3a134f2ace4f6d480733efcfef27c60ea8ed48be1cd36f2c17ec0729775b2c8\nDeleted: sha256:e8bce0aabd687e9ee90e0bada33884f40b277196f72aac9934357472863a80ae\n$\n\n\n'})}),"\n",(0,o.jsx)(e.h2,{id:"dev",children:"Dev"}),"\n",(0,o.jsx)(e.h3,{id:"clone-an-app-from-a-git-repo",children:"clone an app from a Git repo"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",metastring:'title="bash"',children:"\n$ git clone https://github.com/nigelpoulton/psweb.git\nCloning into 'psweb'...\nremote: Enumerating objects: 63, done.\nremote: Counting objects: 100% (34/34), done.\nremote: Compressing objects: 100% (22/22), done.\nremote: Total 63 (delta 13), reused 25 (delta 9), pack-reused 29\nReceiving objects: 100% (63/63), 13.29 KiB | 4.43 MiB/s, done.\nResolving deltas: 100% (21/21), done.\n\n"})}),"\n",(0,o.jsx)(e.h3,{id:"inspect-its-dockerfile",children:"inspect its Dockerfile"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",metastring:'title="bash"',children:'\n$ cd psweb\n$ ls -l\ntotal 40\n-rw-r--r--@ 1 ubuntu ubuntu\n-rw-r--r--@ 1 ubuntu ubuntu\n-rw-r--r--@ 1 ubuntu ubuntu\n-rw-r--r-- 1 ubuntu ubuntu\n-rw-r--r--@ 1 ubuntu ubuntu\ndrwxr-xr-x 4 ubuntu ubuntu\ndrwxr-xr-x 3 ubuntu ubuntu\n338 24 Apr 19:29 Dockerfile\n396 24 Apr 19:32 README.md\n341 24 Apr 19:29 app.js\n216 24 Apr 19:29 circle.yml\n377 24 Apr 19:36 package.json\n128 24 Apr 19:29 test\n96 24 Apr 19:29 views\n\n$ cat Dockerfile\nFROM alpine\nLABEL maintainer="nigelpoulton@hotmail.com"\nRUN apk add --update nodejs nodejs-npm\nCOPY . /src\nWORKDIR /src\nRUN npm install\nEXPOSE 8080\nENTRYPOINT ["node", "./app.js"]\n\n\n\n'})}),"\n",(0,o.jsx)(e.h3,{id:"containerize-and-run-as-a-container",children:"containerize and run as a container."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"\n$ docker build -t test:latest .\n[+] Building 36.2s (11/11) FINISHED\n=> [internal] load .dockerignore\n=> => transferring context: 2B\n=> [internal] load build definition from Dockerfile\n<Snip>\n=> => naming to docker.io/library/test:latest\n=> => unpacking to docker.io/library/test:latest\n0.0s\n0.0s\n0.0s\n0.0s\n0.7s\n\n$ docker images\nREPO\nTAG\ntest\nlatest\nIMAGE ID\n1ede254e072b\nCREATED\n7 seconds ago\nSIZE\n154MB\n\n$ docker run -d \\\n--name web1 \\\n--publish 8080:8080 \\\ntest:latest\n\n"})}),"\n",(0,o.jsx)(e.h3,{id:"new-commands",children:"new commands"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:'docker events  --- see docker restarts, kills, exits in real time. <br/>\ndocker logs -f gnostex-backend -- equivalent of tail -f logs <br/>\ndocker run -d --rm  --name gnostex-backend-api --add-host=host.docker.internal:host-gateway  -p 8080:8080  -e SPRING_PROFILES_ACTIVE=dev  -e DB_URL=jdbc:postgresql://host.docker.internal:5432/gnostexdb  -e DB_USERNAME=gnostex  -e DB_PASSWORD=gnostex  gnostex-backend-api <br/>\n--add-host=host.docker.internal:host-gateway -- Map host.docker.internal to the Linux host<br/>\ntry running postgresql also as a container <br/>\ndocker build -t gnostex-backend-api . -- docker build <br/>\ndocker run -it --rm  --entrypoint sh  gnostex-backend-api  -- for exploring the image<br/>\ncurl -f http://localhost:8080/actuator/health\n\n{"status":"UP","components":{"db":{"status":"UP","details":{"database":"PostgreSQL","validationQuery":"isValid()"}},"diskSpace":{"status":"UP","details":{"total":206900281344,"free":195738656768,"threshold":10485760,"path":"/app/.","exists":true}},"ping":{"status":"UP"},"ssl":{"status":"UP","details":{"validChains":[],"invalidChains":[]}}}}\n\ndocker inspect\ndocker inspect --format=\'{{.State.Health.Status}}\' gnostex-backend-api\n'})}),"\n",(0,o.jsx)(e.h3,{id:"retagging-images",children:"retagging images"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",metastring:'title="bash"',children:"docker images\nREPOSITORY                        TAG       IMAGE ID       SIZE\ngnostex-backend-api                latest    def456\ngnostex-backend-api                abc123    abc123\n\ndocker tag abc123 gnostex-backend-api:latest\n\ndocker images\nREPOSITORY                        TAG       IMAGE ID       SIZE\ngnostex-backend-api                latest    abc123\ngnostex-backend-api                def456    def456\ngnostex-backend-api                abc123    abc123\n\n// Remove old latest tag reference\ndocker rmi gnostex-backend-api:latest\n\n// Tags are just labels, not copies of images.\n// You can move tags freely \u2014 this is how you can roll back latest to a previous build.\n// Useful for manual rollback on VPS:\n\ndocker stop gnostex-backend-api\ndocker rm gnostex-backend-api\ndocker tag abc123 gnostex-backend-api:latest\ndocker run -d --name gnostex-backend-api -p 8080:8080 gnostex-backend-api:latest\n"})})]})}function u(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>s});var i=t(6540);const o={},a=i.createContext(o);function r(n){const e=i.useContext(a);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),i.createElement(a.Provider,{value:e},n.children)}}}]);