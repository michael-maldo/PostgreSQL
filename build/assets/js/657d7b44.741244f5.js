"use strict";(globalThis.webpackChunkpostgresql=globalThis.webpackChunkpostgresql||[]).push([[2802],{108:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"basics/sql - intro","title":"sql - intro","description":"these commands are sequential","source":"@site/docs/basics/sql - intro.md","sourceDirName":"basics","slug":"/basics/sql - intro","permalink":"/docs/basics/sql - intro","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"basics","permalink":"/docs/category/basics"},"next":{"title":"advanced","permalink":"/docs/category/advanced"}}');var a=n(4848),r=n(8453);const i={sidebar_position:1},c="sql - intro",o={},l=[{value:"initialize basicsdb database",id:"initialize-basicsdb-database",level:2},{value:"add basics schema",id:"add-basics-schema",level:2},{value:"creating a new table",id:"creating-a-new-table",level:2},{value:"populating a table with rows",id:"populating-a-table-with-rows",level:2},{value:"querying a table",id:"querying-a-table",level:2},{value:"select *",id:"select-",level:3},{value:"you can write expressions",id:"you-can-write-expressions",level:3},{value:"a query can be \u201cqualified\u201d",id:"a-query-can-be-qualified",level:3},{value:"You can request that the results of a query be returned in sorted order:",id:"you-can-request-that-the-results-of-a-query-be-returned-in-sorted-order",level:3},{value:"In this example, the sort order isn&#39;t fully specified,",id:"in-this-example-the-sort-order-isnt-fully-specified",level:3},{value:"you can request that duplicate rows be removed from the result of a query",id:"you-can-request-that-duplicate-rows-be-removed-from-the-result-of-a-query",level:3},{value:"joins between yables",id:"joins-between-yables",level:3},{value:"return all the weather records",id:"return-all-the-weather-records",level:3},{value:"together with the location of the associated city",id:"together-with-the-location-of-the-associated-city",level:4}];function h(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"sql---intro",children:"sql - intro"})}),"\n",(0,a.jsxs)(t.p,{children:["these commands are sequential",(0,a.jsx)("br",{}),"\ncreates db, schema, sets search_path, creates and populates tables",(0,a.jsx)("br",{}),"\nthen follows with queries, joins",(0,a.jsx)("br",{})]}),"\n",(0,a.jsx)(t.h2,{id:"initialize-basicsdb-database",children:"initialize basicsdb database"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",metastring:'title="psql"',children:"drop database if exists basicsdb; -- if db exists, drop it first\n\ncreate database basicsdb;\n\\c basicsdb\n"})}),"\n",(0,a.jsx)(t.h2,{id:"add-basics-schema",children:"add basics schema"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",metastring:'title="psql"',children:"create schema if not exists basics;\nset search_path to basics, public;\nshow search_path;\n"})}),"\n",(0,a.jsx)(t.h2,{id:"creating-a-new-table",children:"creating a new table"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",metastring:'title="sql"',children:"drop table if exists weather;\nCREATE TABLE if not exists weather (\n    city varchar(80),\n    temp_lo int,\n    temp_hi int,\n    prcp real,\n    cur_date date\n);\n\nCREATE TABLE cities (\n    name            varchar(80),\n    location        point\n);\n\n\\d weather;\n"})}),"\n",(0,a.jsx)(t.h2,{id:"populating-a-table-with-rows",children:"populating a table with rows"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",metastring:"title='sql\"",children:"INSERT INTO weather VALUES ('San Francisco', 1, 50, 0.25, '1994-11-27');\nINSERT INTO weather VALUES ('New York', 2, 50, 0.25, '1994-11-27');\nSELECT * FROM weather;\nCOPY weather from '/var/lib/pgsql/scripts/weather.txt';\nSELECT * from weather;\nCOPY weather TO '/var/lib/pgsql/scripts/weather.copy.txt';\n\n\nINSERT INTO cities VALUES ( 'San Francisco', '(-122.4194, 37.7794)');\nINSERT INTO cities VALUES ( 'New York', '(-74.0060, 40.7128)');\n\n\\echo select * from cities;\nselect * from cities;\n\n\n\\dt basics.*\n\n\\d basics.*\n"})}),"\n",(0,a.jsx)(t.h2,{id:"querying-a-table",children:"querying a table"}),"\n",(0,a.jsx)(t.h3,{id:"select-",children:"select *"}),"\n",(0,a.jsx)(t.p,{children:"\\echo select * from weather;\nselect * from weather;"}),"\n",(0,a.jsx)(t.p,{children:"\\echo SELECT city, temp_lo, temp_hi, prcp, cur_date FROM weather;\nSELECT city, temp_lo, temp_hi, prcp, cur_date FROM weather;"}),"\n",(0,a.jsx)(t.h3,{id:"you-can-write-expressions",children:"you can write expressions"}),"\n",(0,a.jsx)(t.p,{children:"not just simple column references, in the select list."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-agsl",children:"\\echo SELECT city, (temp_hi+temp_lo)/2 AS temp_avg, cur_date FROM weather;\n\\echo\n\nSELECT city, (temp_hi+temp_lo)/2 AS temp_avg, cur_date FROM weather;\n"})}),"\n",(0,a.jsx)(t.h3,{id:"a-query-can-be-qualified",children:"a query can be \u201cqualified\u201d"}),"\n",(0,a.jsxs)(t.p,{children:["by adding a WHERE clause that specifies which rows are wanted.",(0,a.jsx)("br",{}),"\nThe WHERE clause contains a Boolean (truth value) expression, and only rows for which the Boolean expression is true are returned. The usual Boolean operators (AND, OR, and NOT) are allowed in the qualification"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-agsl",children:"\\echo\n\\echo SELECT * FROM weather WHERE city = 'San Francisco' AND prcp > 0.0;\nSELECT * FROM weather WHERE city = 'San Francisco' AND prcp > 0.0;\n\nSELECT * FROM weather WHERE city NOT = 'San Francisco' ;\n"})}),"\n",(0,a.jsx)(t.h3,{id:"you-can-request-that-the-results-of-a-query-be-returned-in-sorted-order",children:"You can request that the results of a query be returned in sorted order:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"\n\n\\echo\n\n\\echo SELECT * FROM weather ORDER BY city;\nSELECT * FROM weather ORDER BY city;\n--SELECT * FROM weather ORDER BY city DESC;\n"})}),"\n",(0,a.jsx)(t.h3,{id:"in-this-example-the-sort-order-isnt-fully-specified",children:"In this example, the sort order isn't fully specified,"}),"\n",(0,a.jsx)(t.p,{children:"and so you might get the San Francisco rows in either order. But you'd always get the results shown above if you do"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-agsl",children:"\n\\echo SELECT * FROM weather ORDER BY city, temp_lo;\nSELECT * FROM weather ORDER BY city desc, temp_lo desc;\n\n\n\\echo SELECT * FROM weather ORDER BY city desc, temp_lo desc;\nSELECT * FROM weather ORDER BY city desc, temp_lo desc;\n"})}),"\n",(0,a.jsx)(t.h3,{id:"you-can-request-that-duplicate-rows-be-removed-from-the-result-of-a-query",children:"you can request that duplicate rows be removed from the result of a query"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-agsl",children:"\n\n\n\n\\echo\n\\echo SELECT DISTINCT city FROM weather;\nSELECT DISTINCT city FROM weather;\n\n\n\\echo using NOT\n\n\\echo select * from weather WHERE city NOT IN ('San Francisco', 'New York');\nselect * from weather WHERE city NOT IN ('San Francisco', 'New York');\n"})}),"\n",(0,a.jsx)(t.h3,{id:"joins-between-yables",children:"joins between yables"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-agsl",children:"\\echo select * from weather;\nselect * from weather;\n\n\\echo select * from cities;\nselect * from cities;\n\n"})}),"\n",(0,a.jsx)(t.h3,{id:"return-all-the-weather-records",children:"return all the weather records"}),"\n",(0,a.jsx)(t.h4,{id:"together-with-the-location-of-the-associated-city",children:"together with the location of the associated city"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-agsl",children:"\\echo\n\\echo select * from weather join cities on city = name;\nselect * from weather join cities on city = name;\n\n\n\n\\echo\n\\echo select * from weather inner join cities on city = name;\nselect * from weather inner join cities on city = name;\n\n"})})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>c});var s=n(6540);const a={},r=s.createContext(a);function i(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);