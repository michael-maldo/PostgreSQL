"use strict";(globalThis.webpackChunkpostgresql=globalThis.webpackChunkpostgresql||[]).push([[460],{8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var t=n(6540);const i={},r=t.createContext(i);function o(e){const s=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:s},e.children)}},9239:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"ssh-key/intro","title":"ssh-key setup","description":"The correct fix (clean + professional)","source":"@site/docs/ssh-key/intro.mdx","sourceDirName":"ssh-key","slug":"/ssh-key/intro","permalink":"/docs/ssh-key/intro","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"ssh-key","permalink":"/docs/category/ssh-key"},"next":{"title":"intro.v1","permalink":"/docs/ssh-key/intro.v1"}}');var i=n(4848),r=n(8453);const o={sidebar_position:1},l="ssh-key setup",d={},c=[{value:"\u2705 Generate a brand-new CI key (once)",id:"-generate-a-brand-new-ci-key-once",level:2},{value:"\u2705 Add public key to VPS",id:"-add-public-key-to-vps",level:2},{value:"\u2705 Add private key to GitHub Secrets",id:"-add-private-key-to-github-secrets",level:2},{value:"\u2705 Test locally (important)",id:"-test-locally-important",level:2},{value:"\ud83d\udd10 Lessons (this is senior-level knowledge)",id:"-lessons-this-is-senior-level-knowledge",level:2}];function a(e){const s={h1:"h1",h2:"h2",header:"header",p:"p",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"ssh-key-setup",children:"ssh-key setup"})}),"\n",(0,i.jsx)(s.p,{children:"The correct fix (clean + professional)"}),"\n",(0,i.jsx)(s.p,{children:"Do not try to recover or guess."}),"\n",(0,i.jsx)(s.h2,{id:"-generate-a-brand-new-ci-key-once",children:"\u2705 Generate a brand-new CI key (once)"}),"\n",(0,i.jsx)(s.p,{children:'ssh-keygen -t ed25519 -f ~/.ssh/github_ci_deploy -C "github-ci-deploy"'}),"\n",(0,i.jsx)(s.h2,{id:"-add-public-key-to-vps",children:"\u2705 Add public key to VPS"}),"\n",(0,i.jsx)(s.p,{children:"cat ~/.ssh/github_ci_deploy.pub >> ~/.ssh/authorized_keys\nchmod 600 ~/.ssh/authorized_keys"}),"\n",(0,i.jsx)(s.h2,{id:"-add-private-key-to-github-secrets",children:"\u2705 Add private key to GitHub Secrets"}),"\n",(0,i.jsx)(s.p,{children:"Secret name:"}),"\n",(0,i.jsx)(s.p,{children:"SERVER_SSH_KEY"}),"\n",(0,i.jsx)(s.p,{children:"Value = contents of:"}),"\n",(0,i.jsx)(s.p,{children:"~/.ssh/github_ci_deploy"}),"\n",(0,i.jsx)(s.h2,{id:"-test-locally-important",children:"\u2705 Test locally (important)"}),"\n",(0,i.jsx)(s.p,{children:"ssh -i ~/.ssh/github_ci_deploy deploy@YOUR_VPS"}),"\n",(0,i.jsx)(s.p,{children:"No password prompt = correct."}),"\n",(0,i.jsx)(s.h2,{id:"-lessons-this-is-senior-level-knowledge",children:"\ud83d\udd10 Lessons (this is senior-level knowledge)"}),"\n",(0,i.jsx)(s.p,{children:"SSH keys are single-source of truth"}),"\n",(0,i.jsx)(s.p,{children:"Re-running ssh-keygen -f destroys identity"}),"\n",(0,i.jsx)(s.p,{children:"CI keys should:"}),"\n",(0,i.jsx)(s.p,{children:"Have unique filenames"}),"\n",(0,i.jsx)(s.p,{children:"Be generated once"}),"\n",(0,i.jsx)(s.p,{children:"Be documented"})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);